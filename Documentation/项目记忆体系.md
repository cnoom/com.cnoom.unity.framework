# ğŸ§  Cnoom Unity Framework é¡¹ç›®è®°å¿†ä½“ç³»

## ğŸ“‹ ç›®å½•
- [1. æ ¸å¿ƒåŠŸèƒ½æ¨¡å—åˆ’åˆ†åŠäº¤äº’é€»è¾‘](#1-æ ¸å¿ƒåŠŸèƒ½æ¨¡å—åˆ’åˆ†åŠäº¤äº’é€»è¾‘)
- [2. å…³é”®æ•°æ®ç»“æ„å®šä¹‰ä¸åº”ç”¨åœºæ™¯](#2-å…³é”®æ•°æ®ç»“æ„å®šä¹‰ä¸åº”ç”¨åœºæ™¯)
- [3. æ¨¡å—é—´ä¸»è¦ä¾èµ–å…³ç³»å›¾è°±](#3-æ¨¡å—é—´ä¸»è¦ä¾èµ–å…³ç³»å›¾è°±)
- [4. é‡è¦é…ç½®å‚æ•°åŠä½œç”¨èŒƒå›´](#4-é‡è¦é…ç½®å‚æ•°åŠä½œç”¨èŒƒå›´)
- [5. å…¸å‹ä¸šåŠ¡åœºæ™¯æ‰§è¡Œæµç¨‹](#5-å…¸å‹ä¸šåŠ¡åœºæ™¯æ‰§è¡Œæµç¨‹)
- [6. å¿«é€Ÿè§£ææŒ‡å—](#6-å¿«é€Ÿè§£ææŒ‡å—)

---

## 1. æ ¸å¿ƒåŠŸèƒ½æ¨¡å—åˆ’åˆ†åŠäº¤äº’é€»è¾‘

### 1.1 æ¶æ„å±‚æ¬¡åˆ’åˆ†

```mermaid
graph TB
    subgraph "åº”ç”¨å±‚ (Application Layer)"
        A[ä¸šåŠ¡æ¨¡å—] --> B[æ¸¸æˆé€»è¾‘æ¨¡å—]
        B --> C[UIæ¨¡å—]
    end
    
    subgraph "æ¡†æ¶å±‚ (Framework Layer)"
        D[FrameworkManager] --> E[EventBus]
        D --> F[ConfigManager]
        D --> G[ErrorRecoveryManager]
        D --> H[MockManager]
    end
    
    subgraph "åŸºç¡€è®¾æ–½å±‚ (Infrastructure Layer)"
        I[BaseModule] --> J[Singletonç³»ç»Ÿ]
        K[Utilså·¥å…·ç±»] --> L[Logger]
    end
    
    subgraph "ç¼–è¾‘å™¨å±‚ (Editor Layer)"
        M[FrameworkDebuggerWindow] --> N[æ€§èƒ½ç›‘æ§é¢æ¿]
        M --> O[æ¨¡å—çŠ¶æ€æŸ¥çœ‹å™¨]
        M --> P[äº‹ä»¶æ€»çº¿ç›‘æ§å™¨]
    end
    
    A --> D
    I --> D
    M --> D
```

### 1.2 æ ¸å¿ƒæ¨¡å—åŠŸèƒ½èŒè´£

| æ¨¡å—åç§° | ä¸»è¦èŒè´£ | å…³é”®æ¥å£ | ç”Ÿå‘½å‘¨æœŸ |
|---------|---------|----------|----------|
| **FrameworkManager** | æ¡†æ¶æ ¸å¿ƒç®¡ç†å™¨ï¼Œç»Ÿä¸€ç®¡ç†æ‰€æœ‰æ¨¡å— | `Initialize()`, `Shutdown()`, `RegisterModule<T>()` | å•ä¾‹æŒä¹…åŒ– |
| **EventBus** | äº‹ä»¶é€šä¿¡ä¸­æ¢ï¼Œæ”¯æŒå¹¿æ’­/å•æ’­/è¯·æ±‚å“åº” | `Broadcast<T>()`, `SendCommand<T>()`, `Query<TQ,TR>()` | æ¡†æ¶ç”Ÿå‘½å‘¨æœŸ |
| **ConfigManager** | é…ç½®ç®¡ç†ï¼Œæ”¯æŒå¤šæºé…ç½®å’Œçƒ­æ›´æ–° | `GetValue<T>()`, `SetValue<T>()`, `RegisterChangeListener()` | æ¡†æ¶ç”Ÿå‘½å‘¨æœŸ |
| **ErrorRecoveryManager** | å¼‚å¸¸å¤„ç†å’Œæ¢å¤ç­–ç•¥ç®¡ç† | `HandleException()`, `RegisterRecoveryStrategy<T>()` | æ¡†æ¶ç”Ÿå‘½å‘¨æœŸ |
| **BaseModule** | æ¨¡å—åŸºç±»ï¼Œæä¾›æ ‡å‡†ç”Ÿå‘½å‘¨æœŸ | `Init()`, `Start()`, `Shutdown()` | æ¨¡å—ç”Ÿå‘½å‘¨æœŸ |

### 1.3 äº¤äº’é€»è¾‘æµç¨‹

```mermaid
sequenceDiagram
    participant FM as FrameworkManager
    participant EB as EventBus
    participant M1 as Module1
    participant M2 as Module2
    participant CM as ConfigManager
    
    FM->>+EB: åˆå§‹åŒ–äº‹ä»¶æ€»çº¿
    FM->>+CM: åˆå§‹åŒ–é…ç½®ç®¡ç†å™¨
    FM->>+M1: è‡ªåŠ¨å‘ç°å¹¶æ³¨å†Œæ¨¡å—
    FM->>+M2: æ³¨å†Œæ¨¡å—
    
    Note over FM: è§£æä¾èµ–å…³ç³»å¹¶æ’åº
    
    FM->>M1: Init() - æ³¨å†Œäº‹ä»¶å¤„ç†å™¨
    M1->>EB: RegisterHandlers(this)
    FM->>M2: Init() - æ³¨å†Œäº‹ä»¶å¤„ç†å™¨
    M2->>EB: RegisterHandlers(this)
    
    FM->>M1: Start() - å¯åŠ¨æ¨¡å—
    FM->>M2: Start() - å¯åŠ¨æ¨¡å—
    
    Note over M1,M2: æ¨¡å—é—´é€šè¿‡EventBusé€šä¿¡
    M1->>EB: Broadcast(Event)
    EB->>M2: åˆ†å‘äº‹ä»¶åˆ°å¤„ç†å™¨
```

---

## 2. å…³é”®æ•°æ®ç»“æ„å®šä¹‰ä¸åº”ç”¨åœºæ™¯

### 2.1 æ ¸å¿ƒæ¥å£å®šä¹‰

#### IModule - æ¨¡å—æ¥å£
```csharp
public interface IModule
{
    string Name { get; }           // æ¨¡å—å”¯ä¸€æ ‡è¯†
    ModuleState State { get; }     // å½“å‰çŠ¶æ€
    int Priority { get; }          // åˆå§‹åŒ–ä¼˜å…ˆçº§
    void Init();                   // åˆå§‹åŒ–é˜¶æ®µ
    void Start();                  // å¯åŠ¨é˜¶æ®µ
    void Shutdown();               // å…³é—­é˜¶æ®µ
}
```

**åº”ç”¨åœºæ™¯**: æ‰€æœ‰ä¸šåŠ¡æ¨¡å—å¿…é¡»å®ç°æ­¤æ¥å£ï¼Œç¡®ä¿ç»Ÿä¸€çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†

#### IEventBus - äº‹ä»¶æ€»çº¿æ¥å£
```csharp
public interface IEventBus
{
    // å¹¿æ’­æ¨¡å¼ - ä¸€å¯¹å¤šé€šä¿¡
    void Broadcast<T>(T data) where T : notnull;
    void SubscribeBroadcast<T>(Action<T> handler, int priority = 0, bool isAsync = false);
    
    // å‘½ä»¤æ¨¡å¼ - ä¸€å¯¹ä¸€é€šä¿¡
    void SendCommand<T>(T command) where T : notnull;
    void RegisterCommandHandler<T>(Action<T> handler, bool replaceIfExists = true);
    
    // æŸ¥è¯¢æ¨¡å¼ - è¯·æ±‚å“åº”é€šä¿¡
    TResponse Query<TQuery, TResponse>(TQuery query) where TQuery : notnull;
    void RegisterQueryHandler<TQuery, TResponse>(Func<TQuery, TResponse> handler);
}
```

**åº”ç”¨åœºæ™¯**: æ¨¡å—é—´è§£è€¦é€šä¿¡ï¼Œæ”¯æŒä¸åŒçš„é€šä¿¡æ¨¡å¼

### 2.2 æ ¸å¿ƒæ•°æ®ç»“æ„

#### ModuleState - æ¨¡å—çŠ¶æ€æšä¸¾
```csharp
public enum ModuleState
{
    Uninitialized,  // æœªåˆå§‹åŒ– - æ¨¡å—åˆšåˆ›å»º
    Initialized,    // å·²åˆå§‹åŒ– - å®ŒæˆInit()è°ƒç”¨
    Started,        // å·²å¯åŠ¨ - å®ŒæˆStart()è°ƒç”¨ï¼Œå¯æ­£å¸¸å·¥ä½œ
    Shutdown        // å·²å…³é—­ - å®ŒæˆShutdown()è°ƒç”¨
}
```

#### ErrorRecord - é”™è¯¯è®°å½•ç»“æ„
```csharp
public class ErrorRecord
{
    public Exception Exception { get; set; }    // å¼‚å¸¸å¯¹è±¡
    public object Context { get; set; }         // ä¸Šä¸‹æ–‡ä¿¡æ¯
    public DateTime Timestamp { get; set; }     // å‘ç”Ÿæ—¶é—´
    public ErrorSeverity Severity { get; set; } // ä¸¥é‡ç¨‹åº¦
}
```

#### PerformanceMetrics - æ€§èƒ½æŒ‡æ ‡ç»“æ„
```csharp
public class PerformanceMetrics
{
    public string OperationName { get; set; }   // æ“ä½œåç§°
    public TimeSpan ExecutionTime { get; set; } // æ‰§è¡Œæ—¶é—´
    public long MemoryBefore { get; set; }      // æ‰§è¡Œå‰å†…å­˜
    public long MemoryAfter { get; set; }       // æ‰§è¡Œåå†…å­˜
    public DateTime Timestamp { get; set; }     // è®°å½•æ—¶é—´
    public string ModuleName { get; set; }      // æ‰€å±æ¨¡å—
}
```

### 2.3 ç‰¹æ€§(Attributes)ç³»ç»Ÿ

#### è‡ªåŠ¨æ³¨å†Œç‰¹æ€§
```csharp
[AutoRegisterModule(Priority = 100, InterfaceType = typeof(IPlayerModule))]
public class PlayerModule : BaseModule, IPlayerModule { }
```

#### äº‹ä»¶å¤„ç†ç‰¹æ€§
```csharp
[BroadcastHandler(Priority = 0, IsAsync = false)]
private void OnHealthChanged(HealthChangedEvent evt) { }

[CommandHandler(ReplaceIfExists = true)]
private void OnPlayerAttack(PlayerAttackCommand cmd) { }

[QueryHandler]
private PlayerStats OnGetPlayerStats(GetPlayerStatsQuery query) { }
```

#### æ€§èƒ½ç›‘æ§ç‰¹æ€§
```csharp
[MonitorPerformance("PlayerUpdate", RecordToGlobalStats = true)]
public void UpdatePlayer() { }
```

---

## 3. æ¨¡å—é—´ä¸»è¦ä¾èµ–å…³ç³»å›¾è°±

### 3.1 ä¾èµ–å±‚æ¬¡ç»“æ„

```mermaid
graph TD
    subgraph "ç¬¬1å±‚ - åŸºç¡€è®¾æ–½"
        A[Singletonç³»ç»Ÿ]
        B[Utilså·¥å…·ç±»]
        C[Loggeræ—¥å¿—]
    end
    
    subgraph "ç¬¬2å±‚ - æ ¸å¿ƒæ¡†æ¶"
        D[FrameworkManager]
        E[EventBus]
        F[ConfigManager]
        G[ErrorRecoveryManager]
        H[MockManager]
    end
    
    subgraph "ç¬¬3å±‚ - æ¨¡å—åŸºç±»"
        I[BaseModule]
        J[IModuleæ¥å£]
    end
    
    subgraph "ç¬¬4å±‚ - ä¸šåŠ¡æ¨¡å—"
        K[PlayerModule]
        L[UIModule]
        M[AudioModule]
        N[GameLogicModule]
    end
    
    subgraph "ç¬¬5å±‚ - ç¼–è¾‘å™¨å·¥å…·"
        O[FrameworkDebuggerWindow]
        P[PerformancePanel]
        Q[ModuleStatusViewer]
    end
    
    A --> D
    B --> D
    C --> D
    D --> E
    D --> F
    D --> G
    D --> H
    E --> I
    F --> I
    I --> J
    J --> K
    J --> L
    J --> M
    J --> N
    D --> O
    E --> P
    I --> Q
    
    K -.->|äº‹ä»¶é€šä¿¡| L
    L -.->|äº‹ä»¶é€šä¿¡| M
    M -.->|äº‹ä»¶é€šä¿¡| N
```

### 3.2 ä¾èµ–å£°æ˜ç¤ºä¾‹

```csharp
// éŸ³é¢‘æ¨¡å—ä¾èµ–é…ç½®æ¨¡å—
[DependsOn(typeof(ConfigModule))]
public class AudioModule : BaseModule { }

// UIæ¨¡å—ä¾èµ–ç©å®¶æ¨¡å—å’ŒéŸ³é¢‘æ¨¡å—
[DependsOn(typeof(PlayerModule))]
[DependsOn(typeof(AudioModule))]
public class UIModule : BaseModule { }

// æ¸¸æˆé€»è¾‘æ¨¡å—ä¾èµ–æ‰€æœ‰åŸºç¡€æ¨¡å—
[DependsOn(typeof(PlayerModule))]
[DependsOn(typeof(UIModule))]
[DependsOn(typeof(AudioModule))]
public class GameLogicModule : BaseModule { }
```

### 3.3 å¾ªç¯ä¾èµ–æ£€æµ‹

æ¡†æ¶åœ¨åˆå§‹åŒ–æ—¶ä¼šè‡ªåŠ¨æ£€æµ‹å¾ªç¯ä¾èµ–ï¼š
```csharp
private void VisitModule(IModule module, HashSet<Type> visited, HashSet<Type> visiting, List<IModule> sortedModules)
{
    var moduleType = module.GetType();
    if (visiting.Contains(moduleType)) 
        throw new InvalidOperationException($"æ£€æµ‹åˆ°æ¶‰åŠæ¨¡å—çš„å¾ªç¯ä¾èµ–å…³ç³» [{module.Name}]");
    // ... ä¾èµ–è§£æé€»è¾‘
}
```

---

## 4. é‡è¦é…ç½®å‚æ•°åŠä½œç”¨èŒƒå›´

### 4.1 æ¡†æ¶çº§é…ç½®

| é…ç½®é”® | é»˜è®¤å€¼ | ä½œç”¨èŒƒå›´ | è¯´æ˜ |
|--------|--------|----------|------|
| `EventBus.MaxCachedEvents` | 1000 | å…¨å±€ | äº‹ä»¶æ€»çº¿æœ€å¤§ç¼“å­˜äº‹ä»¶æ•°é‡ |
| `EventBus.MaxAsyncHandlersPerFrame` | 64 | å…¨å±€ | æ¯å¸§æœ€å¤§å¼‚æ­¥å¤„ç†å™¨æ‰§è¡Œæ•°é‡ |
| `EventBus.EnableInheritanceDispatch` | true | å…¨å±€ | æ˜¯å¦å¯ç”¨ç»§æ‰¿åˆ†å‘æœºåˆ¶ |
| `ErrorRecovery.MaxErrorHistoryCount` | 100 | å…¨å±€ | é”™è¯¯å†å²è®°å½•æœ€å¤§æ•°é‡ |
| `Performance.EnableMonitoring` | true | å…¨å±€ | æ˜¯å¦å¯ç”¨æ€§èƒ½ç›‘æ§ |
| `Performance.SamplingInterval` | 1.0f | å…¨å±€ | æ€§èƒ½é‡‡æ ·é—´éš”(ç§’) |

### 4.2 é…ç½®æºä¼˜å…ˆçº§

```csharp
// ä¼˜å…ˆçº§ä»é«˜åˆ°ä½
1. MemoryConfigSource      // è¿è¡Œæ—¶ä¸´æ—¶é…ç½®
2. PlayerPrefsConfigSource // æŒä¹…åŒ–ç”¨æˆ·é…ç½®  
3. JsonFileConfigSource    // æ–‡ä»¶é…ç½®
4. ResourceJsonConfigSource // èµ„æºé…ç½®
```

### 4.3 é…ç½®ä½¿ç”¨ç¤ºä¾‹

```csharp
// è·å–é…ç½®å€¼
var maxEvents = ConfigManager.GetValue("EventBus.MaxCachedEvents", 1000);

// è®¾ç½®é…ç½®å€¼
ConfigManager.SetValue("Performance.EnableMonitoring", true, persistent: true);

// ç›‘å¬é…ç½®å˜åŒ–
ConfigManager.RegisterChangeListener<bool>("Performance.EnableMonitoring", 
    (key, value) => {
        PerformanceMonitor.SetEnabled(value);
    });
```

---

## 5. å…¸å‹ä¸šåŠ¡åœºæ™¯æ‰§è¡Œæµç¨‹

### 5.1 æ¡†æ¶åˆå§‹åŒ–æµç¨‹

```mermaid
flowchart TD
    A[åº”ç”¨å¯åŠ¨] --> B[FrameworkManager.Initialize()]
    B --> C[åˆå§‹åŒ–EventBus]
    C --> D[åˆå§‹åŒ–ErrorRecoveryManager]
    D --> E[åˆå§‹åŒ–ConfigManager]
    E --> F[åˆå§‹åŒ–MockManager]
    F --> G[åº”ç”¨EventBusé…ç½®]
    G --> H[è‡ªåŠ¨å‘ç°æ¨¡å—]
    H --> I[è§£æä¾èµ–å…³ç³»]
    I --> J[æŒ‰ä¾èµ–é¡ºåºåˆå§‹åŒ–æ¨¡å—]
    J --> K[æŒ‰ä¾èµ–é¡ºåºå¯åŠ¨æ¨¡å—]
    K --> L[å‘å¸ƒFrameworkInitializedEvent]
    L --> M[æ¡†æ¶å°±ç»ª]
```

### 5.2 æ¨¡å—é€šä¿¡æµç¨‹

#### å¹¿æ’­äº‹ä»¶æµç¨‹
```mermaid
sequenceDiagram
    participant P as PlayerModule
    participant EB as EventBus
    participant UI as UIModule
    participant A as AudioModule
    
    P->>EB: Broadcast(HealthChangedEvent)
    EB->>EB: æŸ¥æ‰¾æ‰€æœ‰è®¢é˜…è€…
    EB->>UI: åˆ†å‘åˆ°UIæ¨¡å—
    EB->>A: åˆ†å‘åˆ°éŸ³é¢‘æ¨¡å—
    UI->>UI: æ›´æ–°è¡€æ¡æ˜¾ç¤º
    A->>A: æ’­æ”¾å—ä¼¤éŸ³æ•ˆ
```

#### å‘½ä»¤å¤„ç†æµç¨‹
```mermaid
sequenceDiagram
    participant UI as UIModule
    participant EB as EventBus
    participant P as PlayerModule
    
    UI->>EB: SendCommand(PlayerAttackCommand)
    EB->>EB: æŸ¥æ‰¾å‘½ä»¤å¤„ç†å™¨
    EB->>P: è·¯ç”±åˆ°PlayerModule
    P->>P: æ‰§è¡Œæ”»å‡»é€»è¾‘
    P->>EB: Broadcast(AttackExecutedEvent)
```

#### æŸ¥è¯¢å“åº”æµç¨‹
```mermaid
sequenceDiagram
    participant UI as UIModule
    participant EB as EventBus
    participant P as PlayerModule
    
    UI->>EB: Query(GetPlayerStatsQuery)
    EB->>EB: æŸ¥æ‰¾æŸ¥è¯¢å¤„ç†å™¨
    EB->>P: è·¯ç”±åˆ°PlayerModule
    P->>P: è·å–ç©å®¶æ•°æ®
    P-->>EB: è¿”å›PlayerStats
    EB-->>UI: è¿”å›æŸ¥è¯¢ç»“æœ
    UI->>UI: æ›´æ–°UIæ˜¾ç¤º
```

### 5.3 é”™è¯¯å¤„ç†æµç¨‹

```mermaid
flowchart TD
    A[æ¨¡å—æ‰§è¡Œå¼‚å¸¸] --> B[SafeExecutoræ•è·]
    B --> C[ErrorRecoveryManager.HandleException()]
    C --> D{æŸ¥æ‰¾æ¢å¤ç­–ç•¥}
    D -->|æ‰¾åˆ°ç­–ç•¥| E[æ‰§è¡Œæ¢å¤ç­–ç•¥]
    D -->|æœªæ‰¾åˆ°ç­–ç•¥| F[è®°å½•é”™è¯¯æ—¥å¿—]
    E --> G{æ¢å¤æˆåŠŸ?}
    G -->|æˆåŠŸ| H[ç»§ç»­æ‰§è¡Œ]
    G -->|å¤±è´¥| I[è®°å½•æ¢å¤å¤±è´¥]
    F --> I
    I --> J[å‘å¸ƒErrorOccurredEvent]
    H --> K[æ­£å¸¸æµç¨‹ç»§ç»­]
```

### 5.4 æ€§èƒ½ç›‘æ§æµç¨‹

```mermaid
flowchart TD
    A[æ–¹æ³•è°ƒç”¨] --> B{æœ‰MonitorPerformanceç‰¹æ€§?}
    B -->|æ˜¯| C[è®°å½•å¼€å§‹æ—¶é—´å’Œå†…å­˜]
    B -->|å¦| D[ç›´æ¥æ‰§è¡Œæ–¹æ³•]
    C --> E[æ‰§è¡Œæ–¹æ³•]
    E --> F[è®°å½•ç»“æŸæ—¶é—´å’Œå†…å­˜]
    F --> G[è®¡ç®—æ€§èƒ½æŒ‡æ ‡]
    G --> H[å­˜å‚¨åˆ°æ€§èƒ½å†å²]
    H --> I{éœ€è¦å…¨å±€ç»Ÿè®¡?}
    I -->|æ˜¯| J[æ›´æ–°å…¨å±€æ€§èƒ½ç»Ÿè®¡]
    I -->|å¦| K[ä»…æ¨¡å—çº§ç»Ÿè®¡]
    J --> L[æ–¹æ³•æ‰§è¡Œå®Œæˆ]
    K --> L
    D --> L
```

---

## 6. å¿«é€Ÿè§£ææŒ‡å—

### 6.1 é¡¹ç›®æ¶æ„å¿«é€Ÿè§£æ

**ğŸ” å…³é”®å…¥å£ç‚¹**:
- `FrameworkManager.cs` - æ¡†æ¶æ ¸å¿ƒç®¡ç†å™¨ï¼Œæ‰€æœ‰åŠŸèƒ½çš„ç»Ÿä¸€å…¥å£
- `IModule.cs` - æ¨¡å—æ¥å£å®šä¹‰ï¼Œç†è§£æ¨¡å—ç”Ÿå‘½å‘¨æœŸçš„å…³é”®
- `EventBus.cs` - äº‹ä»¶é€šä¿¡æ ¸å¿ƒï¼Œæ¨¡å—é—´è§£è€¦é€šä¿¡çš„åŸºç¡€

**ğŸ“ ç›®å½•ç»“æ„è§£æ**:
```
Runtime/Core/           # æ¡†æ¶æ ¸å¿ƒåŠŸèƒ½
â”œâ”€â”€ Attributes/         # ç‰¹æ€§å®šä¹‰(è‡ªåŠ¨æ³¨å†Œã€äº‹ä»¶å¤„ç†ç­‰)
â”œâ”€â”€ Config/            # é…ç½®ç®¡ç†ç³»ç»Ÿ
â”œâ”€â”€ Contracts/         # å¥‘çº¦éªŒè¯ç³»ç»Ÿ
â”œâ”€â”€ ErrorHandling/     # é”™è¯¯å¤„ç†å’Œæ¢å¤
â”œâ”€â”€ EventBuss/         # äº‹ä»¶æ€»çº¿ç³»ç»Ÿ
â”œâ”€â”€ Events/            # æ¡†æ¶äº‹ä»¶å®šä¹‰
â”œâ”€â”€ Exceptions/        # æ¡†æ¶å¼‚å¸¸å®šä¹‰
â””â”€â”€ Mock/              # Mockå’Œæµ‹è¯•æ”¯æŒ

Editor/                # ç¼–è¾‘å™¨å·¥å…·
â”œâ”€â”€ FrameworkDebuggerWindow.cs  # ä¸»è°ƒè¯•çª—å£
â”œâ”€â”€ PerformancePanel.cs         # æ€§èƒ½ç›‘æ§é¢æ¿
â”œâ”€â”€ ModuleStatusViewer.cs       # æ¨¡å—çŠ¶æ€æŸ¥çœ‹å™¨
â””â”€â”€ EventBusMonitor.cs          # äº‹ä»¶æ€»çº¿ç›‘æ§å™¨
```

### 6.2 ä¸Šä¸‹æ–‡ç²¾å‡†è¿½æº¯

**ğŸ”— äº‹ä»¶æµè¿½æº¯**:
1. ä½¿ç”¨`EventFlowRecorder`è®°å½•äº‹ä»¶æµ
2. é€šè¿‡`FrameworkDebuggerWindow`å¯è§†åŒ–äº‹ä»¶æµ
3. æ¯ä¸ªäº‹ä»¶åŒ…å«å‘é€è€…ã€æ¥æ”¶è€…ã€æ—¶é—´æˆ³ä¿¡æ¯

**ğŸ“Š æ¨¡å—çŠ¶æ€è¿½æº¯**:
1. æ¨¡å—çŠ¶æ€å˜åŒ–ä¼šå‘å¸ƒ`ModuleStateChangedEvent`
2. å¯é€šè¿‡`ModuleStatusViewer`æŸ¥çœ‹æ‰€æœ‰æ¨¡å—å½“å‰çŠ¶æ€
3. é”™è¯¯å†å²è®°å½•åœ¨`ErrorRecoveryManager`ä¸­å¯æŸ¥è¯¢

**âš¡ æ€§èƒ½è¿½æº¯**:
1. ä½¿ç”¨`MonitorPerformanceAttribute`æ ‡è®°éœ€è¦ç›‘æ§çš„æ–¹æ³•
2. æ€§èƒ½æ•°æ®å­˜å‚¨åœ¨`PerformanceMonitor`ä¸­
3. å¯é€šè¿‡`PerformancePanel`æŸ¥çœ‹å®æ—¶å’Œå†å²æ€§èƒ½æ•°æ®

### 6.3 æ–°éœ€æ±‚å¼€å‘æ™ºèƒ½æç¤º

**ğŸš€ æ·»åŠ æ–°æ¨¡å—**:
1. ç»§æ‰¿`BaseModule`ç±»
2. é‡å†™`OnInit()`, `OnStart()`, `OnShutdown()`æ–¹æ³•
3. ä½¿ç”¨`[AutoRegisterModule]`ç‰¹æ€§è‡ªåŠ¨æ³¨å†Œ
4. ä½¿ç”¨äº‹ä»¶ç‰¹æ€§`[BroadcastHandler]`, `[CommandHandler]`, `[QueryHandler]`å¤„ç†é€šä¿¡

**ğŸ“¡ æ·»åŠ æ–°äº‹ä»¶**:
1. å®šä¹‰äº‹ä»¶ç±»ï¼Œå®ç°ç›¸åº”æ¥å£
2. åœ¨å‘é€æ–¹ä½¿ç”¨`EventBus.Broadcast()`, `SendCommand()`, `Query()`
3. åœ¨æ¥æ”¶æ–¹ä½¿ç”¨ç‰¹æ€§æˆ–æ‰‹åŠ¨æ³¨å†Œå¤„ç†å™¨

**âš™ï¸ æ·»åŠ æ–°é…ç½®**:
1. åœ¨`ConfigManager`ä¸­å®šä¹‰é…ç½®é”®
2. ä½¿ç”¨`GetValue()`å’Œ`SetValue()`è®¿é—®é…ç½®
3. ä½¿ç”¨`RegisterChangeListener()`ç›‘å¬é…ç½®å˜åŒ–

**ğŸ› ï¸ æ·»åŠ æ–°çš„é”™è¯¯æ¢å¤ç­–ç•¥**:
1. å®ç°`IErrorRecoveryStrategy`æ¥å£
2. åœ¨æ¡†æ¶åˆå§‹åŒ–æ—¶æ³¨å†Œç­–ç•¥
3. ç­–ç•¥ä¼šè‡ªåŠ¨åº”ç”¨åˆ°å¯¹åº”çš„å¼‚å¸¸ç±»å‹

**ğŸ“ˆ æ·»åŠ æ€§èƒ½ç›‘æ§**:
1. åœ¨éœ€è¦ç›‘æ§çš„æ–¹æ³•ä¸Šæ·»åŠ `[MonitorPerformance]`ç‰¹æ€§
2. æ€§èƒ½æ•°æ®ä¼šè‡ªåŠ¨æ”¶é›†å’Œå­˜å‚¨
3. å¯é€šè¿‡ç¼–è¾‘å™¨å·¥å…·æŸ¥çœ‹æ€§èƒ½æŠ¥å‘Š

---

## ğŸ¯ æ€»ç»“

è¿™ä¸ªé¡¹ç›®è®°å¿†ä½“ç³»æä¾›äº†ï¼š

âœ… **å®Œæ•´çš„æ¶æ„ç†è§£** - ä»æ¨¡å—åˆ’åˆ†åˆ°äº¤äº’é€»è¾‘çš„å…¨é¢è¦†ç›–
âœ… **ç²¾ç¡®çš„æ•°æ®ç»“æ„å®šä¹‰** - å…³é”®æ¥å£å’Œæ•°æ®ç»“æ„çš„è¯¦ç»†è¯´æ˜  
âœ… **æ¸…æ™°çš„ä¾èµ–å…³ç³»** - æ¨¡å—é—´ä¾èµ–çš„å¯è§†åŒ–å±•ç¤º
âœ… **å…¨é¢çš„é…ç½®ç®¡ç†** - é‡è¦å‚æ•°çš„ä½œç”¨èŒƒå›´å’Œä½¿ç”¨æ–¹æ³•
âœ… **å…¸å‹æµç¨‹æŒ‡å¯¼** - å¸¸è§ä¸šåŠ¡åœºæ™¯çš„æ‰§è¡Œæµç¨‹
âœ… **å¿«é€Ÿå¼€å‘æŒ‡å—** - æ–°éœ€æ±‚å¼€å‘çš„æ™ºèƒ½æç¤ºå’Œæœ€ä½³å®è·µ

é€šè¿‡è¿™ä¸ªè®°å¿†ä½“ç³»ï¼Œå¼€å‘è€…å¯ä»¥å¿«é€Ÿç†è§£é¡¹ç›®æ¶æ„ã€å‡†ç¡®è¿½æº¯ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå¹¶è·å¾—æ–°éœ€æ±‚å¼€å‘æ—¶çš„æ™ºèƒ½æç¤ºï¼Œå¤§å¤§æé«˜å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚